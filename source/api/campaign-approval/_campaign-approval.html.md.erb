# **Campaign API**

## Campaign introduction

> Following examples will use **authorization as query parameter**.

In order to use requests from this documentation, it is necessary to configure an environment defined with parameters such as gateway host and authorization key.

Here's an example of API structure for an endpoint:

**HTTP Request**

`GET {{GATEWAYHOST}}/v/1/campaign`

In order to test requests in a test environment, you can find demonstrational gateway host in the table below. The required authorization key must be requested from Vizibit company. Once given, the authorization key should be written in a header with or without **Bearer** key word or as a **query** parameter (authorization_key) in the testing request.

**Query Parameters**

Parameter | Value
--------- | -----------
**GATEWAYHOST** | https://campaigns-test.signator.hr
**authorization_key** | Your authorization key. Add in a header of request or as **query** parameter.


## Campaign API Calls

![Campaign api](images/Campaign_diagram_approval.png)

### Login User

> If successful the above command returns JSON structured like this:

```json
{
  "user":
  {
  "Id": "8e7c1d26-52f5-44e5-aa00-1d5fcfdea690",
  "ExternalId": "jmaric",
  "FirstName": "Josip",
  "LastName": "Marić",
  "Email": "josip.maric@vizibit.hr",
  "LoginType": "LDAP",
  "Status": "ACTIVE"
  },
  "token":"..."

}

```

This endpoint returns data about user. Retrieved token has limited expiration time.

**HTTP Request**

`GET {{GATEWAYHOST}}/v/1/campaign/login`

### Get Users

> If successful the above command returns JSON structured like this:

```json
{
  "page": 1,
  "perPage": 12,
  "pages": 1,
  "total": 2,
  "count": 2,
  "type": "User",
  "results": [
    {
    "Id": "Id_1",
    "ExternalId": "External_example_1",
    "FirstName": "...",
    "LastName": "...",
    "Email": "example1@vizibit.eu",
    "LoginType": "LDAP",
    "Status": "ACTIVE"
    },
    {
    "Id": "Id_2",
    "ExternalId": "External_example_2",
    "FirstName": "...",
    "LastName": "...",
    "Email": "example2@vizibit.eu",
    "LoginType": "LDAP",
    "Status": "ACTIVE"
    }
}
```

This endpoint retrieves user list.

`GET {{GATEWAYHOST}}/v/1/campaign/{id}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

### Get Campaigns

> If successful the above command returns JSON structured like this:

```json
{
  "page": 1,
  "perPage": 12,
  "pages": 4,
  "total": 37,
  "count": 12,
  "type": "Campaign",
  "results": [
    {
      "Id": "Campaign_example_id",
      "StartedAt": 1636636239,
      "ValidUntil": 1639228239,
      "Name": "New campaign",
      "TransferTemplate": {
        "EN": {
          "Subject": "Email subject",
          "Content": "Text sent in email"
        },
        "DE": {
          "Subject": "...",
          "Content": "..."
        },
        "IT": {
          "Subject": "...",
          "Content": "..."
        },
        "FR": {
          "Subject": "...",
          "Content": "..."
        }
      },
      "Status": "PENDING",
      "Participants": [
          {
            "Id": "Participant_example_id_1",
            "CampaignId": "Campaign_example_id",
            "Status": "CREATED",
            "TransferLanguage": "EN",
            "TransferType": "EMAIL",
            "TransferIdentifier": "example@vizibit.eu",
            "ParticipantData": {
              "mobilePhone": "example@vizibit.eu"
            },
            "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
          }
      ],
      "ParticipantDataRequiredKeys": [],
      "DeliveryAddresses": ["example@vizibit.eu"],
      "Approver": {
      "Id": "Id_1",
      "ExternalId": "External_example_1",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example1@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
      },

      "ApproverId": "Id_1",
      "Owner": {
      "Id": "Id_2",
      "ExternalId": "External_example_2",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example2@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
       },
      "OwnerId": "Id_2"
    }
  ]
}

```

This endpoint retrieves all campaigns that require parameters in the query for which the user is marked as owner or approver.

**HTTP Request**

`GET {{GATEWAYHOST}}/v/1/campaign`

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.
page | 1 | Page number whose campaigns will be returned.
perPage | 12 | Maximal number of campaigns returned in each page.



### Get a Specific Campaign

> If successful the above command returns JSON structured like this:

```json
{
  "Id": "Campaign_example_id",
  "StartedAt": 1634821121,
  "ValidUntil": 1637413121,
  "Name": "Test campaign",
  "TransferTemplate": {
    "EN": {
      "Subject": "Email subject",
      "Content": "Text sent in email"
    },
    "DE": {
      "Subject": "...",
      "Content": "..."
    },
    "IT": {
      "Subject": "...",
      "Content": "..."
    },
    "FR": {
      "Subject": "...",
      "Content": "..."
    }
  },
  "Status": "DRAFT",
  "Participants": [
    {
      "Id": "Participant_example_id_1",
      "CampaignId": "Campaign_example_id",
      "Status": "CREATED",
      "TransferLanguage": "EN",
      "TransferType": "EMAIL",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "example@vizibit.eu"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
    },
    {
      "Id": "Participant_example_id_2",
      "CampaignId": "Campaign_example_id",
      "Status": "CREATED",
      "TransferLanguage": "EN",
      "TransferType": "SMS",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "+29910236548"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
    }
  ],
  "ParticipantDataRequiredKeys": [],
  "DeliveryAddresses": ["example@vizibit.eu"],
  "Approver": {
  "Id": "Id_1",
  "ExternalId": "External_example_1",
  "FirstName": "...",
  "LastName": "...",
  "Email": "example1@vizibit.eu",
  "LoginType": "LDAP",
  "Status": "ACTIVE"
  },

  "ApproverId": "Id_1",
  "Owner": {
  "Id": "Id_2",
  "ExternalId": "External_example_2",
  "FirstName": "...",
  "LastName": "...",
  "Email": "example2@vizibit.eu",
  "LoginType": "LDAP",
  "Status": "ACTIVE"
   },
  "OwnerId": "Id_2"
  }
```

This endpoint retrieves a specific campaign.

`GET {{GATEWAYHOST}}/v/1/campaign/{id}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

### Create Campaign

> JSON body request example:

```json
{
  "name": "Test campaign",
  "transferTemplate": {
    "EN": {
      "Subject":"Campaign Test Subject",
      "Content":"Campaign Test Content"
    }
  },
  "Participants": [
    {
      "Status": "CREATED",
      "TransferLanguage": "EN",
      "TransferType": "EMAIL",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "example@vizibit.eu"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
    },
    {
      "Status": "CREATED",
      "TransferLanguage": "EN",
      "TransferType": "SMS",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "+29910236548"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
    }],
  "status": "DRAFT",
    "ParticipantDataRequiredKeys": [],
    "DeliveryAddresses": ["example@vizibit.eu"],
    "ApproverId": "Id_1",
    "OwnerId": "Id_2"
    }
}
```

> If successful the above command returns JSON structured like this:

```json
{
  "Id": "Campaign_example_id",
  "StartedAt": 1638798772,
  "ValidUntil": 1641390772,
  "Name": "Test campaign",
  "TransferTemplate": {
    "EN": {
      "Subject":"Campaign Test Subject",
      "Content":"Campaign Test Content"
    }
  },
  "Status": "DRAFT",
  "Participants": [
      {
        "Id": "Participant_example_id_1",
        "CampaignId": "Campaign_example_id",
        "Status": "CREATED",
        "TransferLanguage": "EN",
        "TransferType": "EMAIL",
        "TransferIdentifier": "example@vizibit.eu",
        "ParticipantData": {
          "mobilePhone": "example@vizibit.eu"
        },
        "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
      },
      {
        "Id": "Participant_example_id_2",
        "CampaignId": "Campaign_example_id",
        "Status": "CREATED",
        "TransferLanguage": "EN",
        "TransferType": "SMS",
        "TransferIdentifier": "example@vizibit.eu",
        "ParticipantData": {
          "mobilePhone": "+29910236548"
        },
        "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
      }
  ],
  "ParticipantDataRequiredKeys": [],
  "DeliveryAddresses": [],
    "ParticipantDataRequiredKeys": [],
    "DeliveryAddresses": ["example@vizibit.eu"],
    "Approver": {
    "Id": "Id_1",
    "ExternalId": "External_example_1",
    "FirstName": "...",
    "LastName": "...",
    "Email": "example1@vizibit.eu",
    "LoginType": "LDAP",
    "Status": "ACTIVE"
    },

    "ApproverId": "Id_1",
    "Owner": {
    "Id": "Id_2",
    "ExternalId": "External_example_2",
    "FirstName": "...",
    "LastName": "...",
    "Email": "example2@vizibit.eu",
    "LoginType": "LDAP",
    "Status": "ACTIVE"
     },
    "OwnerId": "Id_2"
    }
}
```

This endpoint creates new campaign filled with required parameters filled in requests body.

In section "Body input" bolded body values are required.

**HTTP Request**

`POST {{GATEWAYHOST}}/v/1/campaign`

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

**Body input**

- **name** - Campaign name
- **transferTemplate** - JSON object with language codes(ISO 639-1) as key and values as objects:
  - **Subject** - Email subject
  - **Content** - Text contained in email
- **Participants** - Array of object with following parameters:
  - **TransferLanguage** - Language code(ISO 639-1) of subject and content send in email, default: EN
  - **TransferIdentifier** - Participants email
  - **TransferType** - Defines means of transmission for otp, currently implemented EMAIL and SMS
  - **ParticipantData** - Object containing data about participant
    - **mobilePhone** - Text of mobile phone number for SMS ie. email where participant gets otp
      - Means of transmission defined in TransferType

  - **status** - <code>DRAFT</code> or <code>WAITING_FOR_APPROVAL</code>:
    - <code>DRAFT</code> - user can still change campaign
    - <code>WAITING_FOR_APPROVAL</code> - user sends other user to approve
    - other statuses can't be defined at creation of campaign, only when created
- ParticipantDataRequiredKeys - Array of ParticipantData fields expected to be in request
- DeliveryAddresses - Email addresses where campaign changes are sent


### Update Campaign

> JSON body request example:

```json
{
  "status": "WAITING_FOR_APPROVAL"
}
```

> If successful the above command returns JSON structured like this:

```json
{
  "Id": "Campaign_example_id",
  "StartedAt": 1638798772,
  "ValidUntil": 1641390772,
  "Name": "Test campaign",
  "TransferTemplate": {
    "EN": {
      "Subject":"Campaign Test Subject",
      "Content":"Campaign Test Content"
    }
  },
  "Status": "WAITING_FOR_APPROVAL",
  "Participants": [
    {
      "Id": "Participant_example_id_1",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "EMAIL",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "example@vizibit.eu"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
    },
    {
      "Id": "Participant_example_id_2",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "SMS",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "+29910236548"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
    }
  ],
  "ParticipantDataRequiredKeys": [],
  "DeliveryAddresses": [],
  "ParticipantDataRequiredKeys": [],
      "DeliveryAddresses": ["example@vizibit.eu"],
      "Approver": {
      "Id": "Id_1",
      "ExternalId": "External_example_1",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example1@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
      },

      "ApproverId": "Id_1",
      "Owner": {
      "Id": "Id_2",
      "ExternalId": "External_example_2",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example2@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
       },
      "OwnerId": "Id_2"
      }
}
```

Main purpose of this endpoint is to allow user to change campaigns **STATUS**.

Except changing status it can change other campaign parameters, but only in campaigns which **STATUS** is **<code>DRAFT</code>**.
It can change one or more parameters included in campaign.


**HTTP Request**

`PUT {{GATEWAYHOST}}/v/1/campaign/{id}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

**Body input**

- name - Campaign name
- transferTemplate - JSON object with language key and objects:
  - Subject - Email subject
  - Content - Text contained in email

  - status - <code>DRAFT</code>, <code>WAITING_FOR_APPROVAL</code>, <code>PENDING</code>, <code>ERROR</code>, <code>FINISHED</code>, <code>DELETED</code>, <code>ARCHIVED</code>, <code>TERMINATED</code>:
    - <code>DRAFT</code> - user can still change campaign
      - can change to <code>DRAFT</code>, <code>WAITING_FOR_APPROVAL</code>, <code>DELETED</code>, <code>ERROR</code>
    - <code>WAITING_FOR_APPROVAL</code> - user can approve or reject campaign - **SEPARATE METHODS**
      - can change to <code>DRAFT</code>, <code>WAITING_FOR_APPROVAL</code>, <code>PENDING</code>, <code>ERROR</code>, <code>DELETED</code>
    - <code>PENDING</code> - user can't change campaign because emails are sent to participants
      - can change to <code>PENDING</code>, <code>ERROR</code>, <code>DELETED</code>, <code>ARCHIVED</code>, <code>FINISHED</code>, <code>TERMINATED</code>
    - <code>ERROR</code> - error accrued - final state
    - <code>FINISHED</code> - every participant filled form or the duration of the campaign has finished or campaign creator changed status
      - can change to <code>FINISHED</code>, <code>DELETED</code>, <code>ARCHIVED</code>
    - <code>ARCHIVED</code> - admin changed campaign status so it is visible only when asked for

![Campaign state machine](images/Campaign_approval_state_machine.png)


### Update Campaign Participant

> JSON body request example:

```json
{
  "status": "COMPLETED"
}
```
> If successfully completed response is **204 No Content**

Purpose of this endpoint is to update participant **STATUS**, but only in campaigns which **STATUS** is **PENDING**

**HTTP Request**

`PUT {{GATEWAYHOST}}/v/1/campaign/{id}/participant/{participant_id}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.
participant_id | | Id of participant requested to update.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

**Body input**

- status - new participant status
  - <code>CREATED</code> - when campaign status is still draft, can change to <code>CREATED</code> and <code>SENT</code>
  - <code>SENT</code> - when campaign admin starts campaign ie. campaign status switched to <code>PENDING</code>
    - emails are sent to participants
    - can change to <code>READ</code>
  - <code>READ</code> - campaign participant opened link received in email, can open multiple times
    - can change to <code>READ</code>, <code>COMPLETED</code>, <code>ERROR</code>
  - <code>COMPLETED</code> - participant filled form, final state
  - <code>ERROR</code> - error occured, final state


![Participant state machine](images/Participant_state_machine.png)

### Approve Campaign

> JSON body request example:

```json
{
  "Reason":"",
  "Rejected":false
}
```

> If successful the above command returns JSON structured like this:

```json
{
  "Id": "Campaign_example_id",
  "StartedAt": 1638798772,
  "ValidUntil": 1641390772,
  "Name": "Test campaign",
  "TransferTemplate": {
    "EN": {
      "Subject":"Campaign Test Subject",
      "Content":"Campaign Test Content"
    }
  },
  "Status": "PENDING",
  "Participants": [
    {
      "Id": "Participant_example_id_1",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "EMAIL",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "example@vizibit.eu"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
    },
    {
      "Id": "Participant_example_id_2",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "SMS",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "+29910236548"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
    }
  ],
  "ParticipantDataRequiredKeys": [],
  "DeliveryAddresses": [],
  "ParticipantDataRequiredKeys": [],
      "DeliveryAddresses": ["example@vizibit.eu"],
      "Approver": {
      "Id": "Id_1",
      "ExternalId": "External_example_1",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example1@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
      },

      "ApproverId": "Id_1",
      "Owner": {
      "Id": "Id_2",
      "ExternalId": "External_example_2",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example2@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
       },
      "OwnerId": "Id_2"
      }
}
```

Only for **Approver**.
Changes campaigns which **STATUS** is **<code>WAITING_FOR_APPROVAL</code>** to status **<code>PENDING</code>**.


**HTTP Request**

`PUT {{GATEWAYHOST}}/v/1/campaign/{id}/approval/give`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

**Body input**

- **Reason** - reason why user approves
- Rejected - boolean - default <code>false</code>

### Reject Campaign

> JSON body request example:

```json
{
  "Reason":"",
  "Rejected":true
}
```

> If successful the above command returns JSON structured like this:

```json
{
  "Id": "Campaign_example_id",
  "StartedAt": 1638798772,
  "ValidUntil": 1641390772,
  "Name": "Test campaign",
  "TransferTemplate": {
    "EN": {
      "Subject":"Campaign Test Subject",
      "Content":"Campaign Test Content"
    }
  },
  "Status": "DRAFT",
  "Participants": [
    {
      "Id": "Participant_example_id_1",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "EMAIL",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "example@vizibit.eu"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_1&language=EN"
    },
    {
      "Id": "Participant_example_id_2",
      "CampaignId": "Campaign_example_id",
      "Status": "SEND",
      "TransferLanguage": "EN",
      "TransferType": "SMS",
      "TransferIdentifier": "example@vizibit.eu",
      "ParticipantData": {
        "mobilePhone": "+29910236548"
      },
      "EntityLink": "{{GATEWAYHOST}}/residence?cid=Campaign_example_id&pid=Participant_example_id_2&language=EN"
    }
  ],
  "ParticipantDataRequiredKeys": [],
  "DeliveryAddresses": [],
  "ParticipantDataRequiredKeys": [],
      "DeliveryAddresses": ["example@vizibit.eu"],
      "Approver": {
      "Id": "Id_1",
      "ExternalId": "External_example_1",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example1@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
      },

      "ApproverId": "Id_1",
      "Owner": {
      "Id": "Id_2",
      "ExternalId": "External_example_2",
      "FirstName": "...",
      "LastName": "...",
      "Email": "example2@vizibit.eu",
      "LoginType": "LDAP",
      "Status": "ACTIVE"
       },
      "OwnerId": "Id_2"
      }
}
```

Only for **Approver**.
Changes campaigns which **STATUS** is **<code>WAITING_FOR_APPROVAL</code>** to status **<code>DRAFT</code>**.

**HTTP Request**

`PUT {{GATEWAYHOST}}/v/1/campaign/{id}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
id |  | Id of the campaign requested in call.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.

**Body input**

- **Reason** - reason why user approves
- Rejected - boolean - default <code>false</code>


### Get report for Campaigns

> If successfully completed returns filtered report with campaigns in requested file type.

This endpoint retrieves report about campaigns requested by parameters in query.

**HTTP Request**

`GET {{GATEWAYHOST}}/v/1/campaign/report/{report_type}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
report_type |  | Type of report, CSV or XLSX.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.
page | 1 | Page number whose campaigns will be returned.
perPage | 12 | Maximal number of campaigns returned in each page.


### Get report for Campaign Participants

> If successfully completed returns filtered report with campaign participants in requested file type.

This endpoint retrieves report about campaign participants.

**HTTP Request**

`GET {{GATEWAYHOST}}/v/1/campaign/{id:guid}/report/{report_type}`

**Route Values**

Parameter | Default | Description
--------- | ------- | -----------
report_type |  | Type of report, CSV or XLSX.

**Query Parameters**

Parameter | Default | Description
--------- | ------- | -----------
**authorization_key** |  | Indicates the user and his authorities.


---

## Campaign error feedback

All errors return the HTTP status code 400, unless an unforeseen situation has occurred. In that case HTTP status code is 500.

All errors are returned as **JSON**.

List of possible errors on Campaign interface

Error Code | Meaning
---------- | -------
22000 | Field 'campaignId' missing from request
22001 | Field 'participantId' missing from request
22002 | Field 'otp' missing from request
22003 | No participant with requested 'campaignId' and 'participanId'
22004 | Field 'FormData' missing from request
22005 | Campaign not found
22006 | Campaign participant not found
22007 | Unable to update campaign
22008 | Created campaign can only be DRAFT or PENDING
22009 | Cannot change campaign status from 'PENDING' to 'DRAFT'
22010 | Cannot change campaign participant status from 'READ' to 'SENT'
22011 | Cannot update non PENDING campaign
22012 | Cannot add users with email: example@vizibit.eu
22013 | Participant: 'participant_1', missing some of required data keys: 'mobilePhone'
22014 | Request body must be defined
22015 | Needed at least one participant to start campaign
22016 | Participant language not implemented in transfer template
22017 | Missing information about entity
22018 | Needed at least one transfer template
22019 | Participant has already filled the campaign.
22020 | Participant mobile phone is not defined
22021 | Campaign has not yet started
22022 | Campaign has finished
22023 | Not existing report type.
22024 | Missing properties for column names.

In case of an error, the processing is interrupted and the error response is returned to the caller.
